<html>
    <head>
        <title>electro</title>
          <!---bootstrap CDN-->
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">  
          <meta name="viewport" content="=width=device-width,initial-scale=1.0">
        </head>      
        <body onload="loadProducts();">
           <!-- ad banner start-->
              <div class="row">
                <div class="col-lg-6 col-sm-12">
                 <img src="https://img4.gadgetsnow.com/gd/images/products/additional/large/G390864_View_1/mobiles/smartphones/apple-iphone-14-pro-max-512-gb-deep-purple-6-gb-ram-.jpg" alt="" style="width:90%;height:70%;margin-top:50px;">
                </div>
               <div class="col-lg-6 col-sm-12">
                 <h3 style="text-align:center;margin-top:270px;">Apples iPhone<span style="font-size:50px;"> Series 7</span></h3>
                 <p style="text-align:center;">
                    Apple iPhone 14 Pro Max 512 GB <span style="color:red;">iPhone</span>Deep Purple, 6 GB RAM
                 </p>
                 <p style="text-align:center;">
                <button class="btn btn-primary" onclick="adClick()">Buy Now</button>
                &nbsp;
                <a  href="">View Details ></View></a>
                </p>
               </div>
              </div>
            <!-- ad banner end-->
            <!-- product catalog end-->
                <div class="container">
                    <hr>
                    <h2 class="text-center">Products Catalogue</h2>
                    <br>
                     <!--- grid with card start-->
      <div class="row" id="productData"> 
      </div>
      <BR>
      <!-- grid with card end-->
                </div>
            <!-- product catalog end-->
            <!--- contact start-->
            <div class="container">
                <h2 class="text-center">Contact Us</h2><br>
                <div class="row" style="margin-top:30px;">
                    <div class="col-lg-4 col-sm-12">
                     <h6 >Email:<b>saleselectro@gmail.com</h6></b></h6>
                     <h6>Mobile:<b>+91 555 555 555 </h6></b></h6>
                      <p>Address:#123,1st cross,2nd main,gandi nagar,Bangalore-574143</p>
                    </div>
                    <div class="col-lg-8 col-sm-12">
                        <h4>For bulk orders write us</h4>
                        <br>
                        <p>
                            <label>Name:</label>
                            <input type="text" id="name" class="form-control">
                            <span id="errName" style="color:red;"></span>
                          
                        </p>
                        <p>
                            <label>Email</label>
                            <input type="text" id="email" class="form-control">
                            <span id="errEmail" style="color:red;"></span>
                        </p>
                        <p>
                            <label>Mobile</label>
                            <input type="number" maxlength="10" id="mobile" class="form-control">
                            <span id="errMobile" style="color:red;"></span>
                        </p>
                        <p>
                            <label>Comments:</label>
                            <textarea class="form-control" id="comments"></textarea>
                            <span id="errComment" style="color:red;"></span>

                        </p>
                        <p>
                            <button onclick="validateForm()" class="btn btn-primary" style="width:100px;">SUBMIT</button>
                            <span id="successMsg" style="color:green;"></span>
                        </p>
                    </div>
                </div>
            </div>
             <!-- contact end-->
             <script> 
            function validateForm()
            {
                 //fetch value from name textbox
                 var name=document.getElementById("name").value 
                 //check if name is empty or  not
                 if(name=='')
                 {
                     document.getElementById('errName').innerHTML='Please enter your name'
                     return false
                 }
                 else
                 {
                     document.getElementById('errName').innerHTML=''
                 }
                 //validate name
                  var regxName = /^[A-Za-z]+$/
                  var validName = name.match(regxName)

                  if(!validName)
                  {
                    document.getElementById('errName').innerHTML ='Plaese enter valid name'
                  return false                  
                 }
                 else
                 {
                  
                     document.getElementById('errName').innerHTML=''
                 }
                 //fetch value from email
                 var email=document.getElementById("email").value 
                 //check if email is empty or not
                 if(email=='')
                 {
                  document.getElementById('errEmail').innerHTML='Please enter your email'
                     return false
                 }
                 else
                 {
                   document.getElementById('errEmail').innerHTML=''
                 }   
                 //validate name
                 var regxEmail =  /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/  
                  var validEmail = email.match(regxEmail)
                  if(!validEmail)
                  {
                    document.getElementById('errEmail').innerHTML ='Please enter valid email'
                  return false                  
                 }
                 else
                 {
                  
                     document.getElementById('errEmail').innerHTML=''
                 }
                
                 //fetch value from mobile textbox
                 var mobile=document.getElementById("mobile").value 
                 //check if mobile is empty or not
                 if(mobile=='')
                 {
                  document.getElementById('errMobile').innerHTML='Please enter your mobile number!'
                     return false
                 }
                 else
                 {
                   document.getElementById('errMobile').innerHTML=''
                 }   
                 //validate mobile
                 var regxMobile =  /(\+91-?|0)?\d{10}/
                  var validMobile = mobile.match(regxMobile)
                  if(!validMobile)
                  {
                    document.getElementById('errMobile').innerHTML ='Please enter valid mobile'
                    return false                  
                  }
                 else
                 {
                  
                     document.getElementById('errMobile').innerHTML=''
                 }
                 //if comments are written
                 var comments=document.getElementById("comments").value 

                 if(comments)
                 {
                  //validate comments
                  var regxComments= /^[A-Za-z0-9#.-/ ]+$/
                  var validComments = comments.match(regxComments)
                  if(!validComments)
                  {
                    document.getElementById('errComment').innerHTML ='Only alphabetic with /.-# are allowed'
                    return false                  
                  }
                 else
                 {
                  
                     document.getElementById('errComment').innerHTML=''
                 }
                }
                else
                {
                    document.getElementById('errComment').innerHTML=''

                }
                 /* AJAX Code goes here */
                 var xhttpContact = new XMLHttpRequest()  
                     xhttpContact.onreadystatechange=function()
                     {
                         if(this.readyState == 4 && this.status == 200)
                         { 
                             document.getElementById('successMsg').innerHTML=
                             this.responseText
                         }  
                 }
                 xhttpContact.open('POST','http://localhost:5000/save-contact-data',true)
                 xhttpContact.setRequestHeader('Content-type','application/x-www-form-urlencoded')
                 xhttpContact.send('name='+name+'&email='+email+'&mobile='+mobile+'&comments='+comments)
                     
                }
            
                /* load Product start */
                function loadProducts()
                {
                     /* AJAX code to recieve data from server */
                     var xhttpProducts = new XMLHttpRequest()  
                     xhttpProducts.onreadystatechange=function()
                     {
                         if(this.readyState == 4 && this.status == 200)
                         {
                          var jsonData=JSON.parse(this.responseText)
                          var jsonDataLength=jsonData.length;
                          var producthtml=''

                          for(var i=0;i<jsonDataLength;i++)
                          {
                            var productTitle=jsonData[i].product_title
                            var productDecscription=jsonData[i].product_description
                            var productImage=jsonData[i].image 
                            producthtml+='<div class="col-lg-3 col-sm-12">'
                            producthtml+='<div class="card">'
                             producthtml+='<img src="'+productImage+'" alt="not support" style="width:100%;">'
                             producthtml+='<div class="card-body">'
                              producthtml+='<h5 calss="card-title">'+productTitle+' </h5>'
                              producthtml+='<p class="card-text"> '+productDecscription+'</p>'
                              producthtml+='<button class="btn btn-primary" style="width:100%;">Add to Cart</button>'
                              producthtml+='</div>'
                              producthtml+='</div>'


                              producthtml+='</div>'
                          } //for  loop end
                          document.getElementById('productData').innerHTML=producthtml;
                         }
                     };
                     xhttpProducts.open('GET','http://localhost:5000/products',true)
                     xhttpProducts.send()
                }
              
                /* Load roducts end*/
            </script>
        </body>
</html>